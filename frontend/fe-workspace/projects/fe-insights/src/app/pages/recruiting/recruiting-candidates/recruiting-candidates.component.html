<mat-tab-group #tabgroup class="group-tab">
  <mat-tab [label]="'RECRUITING.CANDIDATES' | translate">
    <app-table-data-view
      [tableDataSet]="candidatesTableData"
      [columnTemplates]="tableColumnTemplates"
      [rowActions]="tableRowActions"
      [mainActions]="tableMainActions"
      [filteredValue]="filteredValueTxt"
      (outFullDataSet) ="GetChildData($event)"
      [filteredValueShow]="true"
    >
    </app-table-data-view>
  </mat-tab>
  <mat-tab [label]="'RECRUITING.CANDIDATE_DETAIL' | translate" *ngIf="this.showPersonDetail">
    <div class="general-container">
      <div class="card people-card">
        <div class="card-header">
          <div class="card-title">{{ titleCard }}:
            <ng-container>
              {{frmCandidate.value.cognome}} {{frmCandidate.value.nome}}
            </ng-container>
          </div>
        </div>
        <div class="card-body">
          <div class="user-editor-tab">
            <div class="data-area">
              <form [formGroup]="this.frmCandidate">
                <div class="form-row">
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.nome" | translate}}</mat-label>
                    <input matInput formControlName="nome">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.cognome" | translate}}</mat-label>
                    <input matInput formControlName="cognome">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.email" | translate}}</mat-label>
                    <input matInput formControlName="email">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.telefono" | translate}}</mat-label>
                    <input matInput formControlName="telefono">
                  </mat-form-field>
                </div>

                <div class="form-row">
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.data_nascita" | translate}}</mat-label>
                    <input matInput formControlName="data_nascita">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.age" | translate}}</mat-label>
                    <input matInput formControlName="age">
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.sesso" | translate}}</mat-label>
                    <input matInput formControlName="sesso">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.indirizzo" | translate}}</mat-label>
                    <input matInput formControlName="indirizzo">
                  </mat-form-field>
                </div>

                <div class="form-row">
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.cityName" | translate}}</mat-label>
                    <input matInput formControlName="cityName">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.countryName" | translate}}</mat-label>
                    <input matInput formControlName="countryName">
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.stateName" | translate}}</mat-label>
                    <input matInput formControlName="stateName">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.nationality" | translate}}</mat-label>
                    <input matInput formControlName="nationality">
                  </mat-form-field>
                </div>

                <div class="form-row">
                  <mat-form-field >
                    <mat-label>{{"CANDIDATE.univ" | translate}}</mat-label>
                    <input matInput formControlName="univ">
                  </mat-form-field>

                  <mat-form-field *ngIf="frmCandidate.value.livello_studi === 'Graduated'">
                    <mat-label>{{"CANDIDATE.laurea" | translate}}</mat-label>
                    <input matInput formControlName="laurea">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.azienda" | translate}}</mat-label>
                    <input matInput formControlName="azienda">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.titolo" | translate}}</mat-label>
                    <input matInput formControlName="titolo">
                  </mat-form-field>
                </div>

                <div class="form-row">
                  <mat-form-field>
                    <mat-label>{{"CANDIDATE.livello_studi" | translate}}</mat-label>
                    <input matInput formControlName="livello_studi">
                  </mat-form-field>

                  <mat-form-field *ngIf="frmCandidate.value.livello_studi === 'Graduated'">
                    <mat-label>{{"CANDIDATE.voto_laurea" | translate}}</mat-label>
                    <input matInput formControlName="voto_laurea" style="width: 20px;"> <span style="color: #aaaaaa;" *ngIf="frmCandidate.value.lode === true">- Lode</span>
                  </mat-form-field>
                  <mat-form-field *ngIf="frmCandidate.value.livello_studi === 'Not Graduated'">
                    <mat-label>{{"CANDIDATE.scoreAverage" | translate}}</mat-label>
                    <input matInput formControlName="scoreAverage">
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label *ngIf="frmCandidate.value.livello_studi === 'Graduated'">{{"CANDIDATE.degree_year" | translate}}</mat-label>
                    <input matInput formControlName="degreeYear">
                  </mat-form-field>
                </div>
                <div class="form-row mb-0">
                  <mat-form-field *ngIf="frmCandidate.value.livello_studi === 'Graduated' && frmCandidate.value.isReadDoctorate" >
                    <mat-label>{{"CANDIDATE.doctorateDescription" | translate}}</mat-label>
                    <input matInput formControlName="doctorateDescription">
                  </mat-form-field>
                  <mat-form-field *ngIf="frmCandidate.value.livello_studi === 'Graduated' && frmCandidate.value.isReadMaster">
                    <mat-label>{{"CANDIDATE.materDescription" | translate}}</mat-label>
                    <input matInput formControlName="materDescription">
                  </mat-form-field>
                  <mat-form-field *ngIf="frmCandidate.value.livello_studi === 'Graduated' ">
                    <mat-label>{{"CANDIDATE.stateExamination" | translate}}</mat-label>
                    <input matInput formControlName="stateExamination">
                    <!-- <input matInput *ngIf="stateExamination"   value="Yes" disabled>
                    <input matInput *ngIf="!stateExamination"  value="No" disabled> -->
                  </mat-form-field>
                </div>
              </form>
              <div class="form-row" *ngIf="currentPerson && (currentPerson.resumeId || currentPerson.videoId)">
                <button mat-button (click)="downloadCv()" *ngIf="currentPerson && currentPerson.resumeId">
                  <mat-icon>download</mat-icon>
                  Download CV
                </button>
                <button *ngIf="currentPerson && currentPerson.videoId" (click)="downloadVideo()" mat-button fileSaver [method]="'GET'" [fileName]="frmCandidate.value.nome + '-video-' + momentTime + '.mp4'" [url]="baseImageUrl + currentPerson.videoId">
                  <mat-icon>download</mat-icon>
                  Download Video
                </button>
                <!--<button mat-button (click)="downloadVideo()" *ngIf="currentPerson && currentPerson.videoId">
                  <mat-icon>download</mat-icon>
                    downloadVideo
                </button>-->
              </div>
            </div>
            <div style="width:100%;">
              <ng-container *ngIf="candidatesApplicationData && candidatesApplicationData.length > 0">
                <table mat-table [dataSource]="candidatesApplicationData"> 

                  <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef>{{"RECRUITING.JOB_OPENINGS" | translate}}</th>
                    <td mat-cell *matCellDef="let element">{{(element.opening) ? element.opening.description : null}}</td>
                    <td mat-footer-cell *matFooterCellDef="let element"></td>
                  </ng-container>

                  <ng-container matColumnDef="jobOpeningType">
                    <th mat-header-cell *matHeaderCellDef>{{"JOB_OPENING.JOBTYPE" | translate}}</th>
                    <td mat-cell *matCellDef="let element">{{element.jobOpeningType | translate}}</td>
                    <td mat-footer-cell *matFooterCellDef="let element"></td>
                  </ng-container>

                  <ng-container matColumnDef="data_completamento">
                    <th mat-header-cell *matHeaderCellDef>{{"JOB_APPLICATION.COMPLETION_DATE" | translate}}</th>
                    <td mat-cell *matCellDef="let element">{{element.data_completamento | date:'dd/MM/yyyy HH:mm'}}</td>
                    <td mat-footer-cell *matFooterCellDef="let element"></td>
                  </ng-container>

                  <ng-container matColumnDef="fitindex">
                    <th mat-header-cell *matHeaderCellDef>{{"JOB_APPLICATION.FIT_INDEX" | translate}}</th>
                    <td mat-cell *matCellDef="let element">{{element.fitindex ? element.fitindex : '-'}}</td>
                    <td mat-footer-cell *matFooterCellDef="let element"></td>
                  </ng-container>

                  <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef>{{"JOB_APPLICATION.STATUS" | translate}}</th>
                    <td mat-cell *matCellDef="let element">{{(element.status) ? element.status.description : null}}</td>
                    <td mat-footer-cell *matFooterCellDef="let element"></td>
                  </ng-container>

                  <ng-container matColumnDef="viewDetail">
                    <th mat-header-cell *matHeaderCellDef>{{"JOB_APPLICATION.VIEW_DETAIL" | translate}}</th>
                    <td mat-cell *matCellDef="let element">
                      <span (click)="viewJobDetails(element.id)" style="cursor: pointer">
                        <mat-icon>visibility</mat-icon>
                      </span>
                    </td>
                    <td mat-footer-cell *matFooterCellDef="let element"></td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="applicationsDisplayedColumns; " style="height: 40px;"></tr>
                  <tr mat-row *matRowDef="let row; columns: applicationsDisplayedColumns;"></tr>
                </table>
              </ng-container>

            </div>

          </div>

        </div>
        <div class="card-footer">
          <button mat-flat-button class="action-button" color="primary"
                  (click)="onViewUserCancelClick()">{{'GENERAL.CANCEL'|translate}}</button>
          <!--<span class="width-5"></span>
          <button mat-flat-button class="action-button" color="primary" [disabled]="!isEditConfirmEnabled()"
                  cdkFocusInitial (click)="onEditConfirmClick()">{{'GENERAL.CONFIRM'|translate}}</button>-->
        </div>
      </div>

    </div>
  </mat-tab>
</mat-tab-group>
