<section class="client-management">
    <div class="row">
        <div class="col-md-12">
            <app-breadcrumb [title]="'INSIGHTS_MENU.PEOPLE'" [title3]="generalDetailsForm.value.name + ' ' + generalDetailsForm.value.surname" [type]="" [routePath]="'/people'">
            </app-breadcrumb>
        </div>
        <div class="col-md-12">
            <div class="common-stepper clickableStepper">
                <mat-horizontal-stepper linear labelPosition="bottom" #peopleStepper (selectionChange)="onTabChanged($event);">
                    <mat-step [stepControl]="generalDetailsForm">
                      <ng-template matStepLabel>
                        <span>
                          <img src="assets/images/General.svg"/>
                          <p>{{'Registry' | translate}}</p>
                        </span>
                      </ng-template>
                      <div class="table-content box-style">
                        <div class="table-heading m-30">
                          <h3 style="font-weight: 600">{{'Registry' | translate}}</h3>
                          <p class="m-0"><span class="red-label">*</span> {{'GENERAL.Indicates a required field' | translate}}</p>
                        </div>
                        <form class="form-wrapper" [formGroup]="generalDetailsForm">
                          <div class="row">
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Name' | translate}} <span class="red-label">*</span></mat-label>
                                    <input formControlName="name" matInput type="text" name="name" (keydown)="space($event)" style="text-transform:capitalize;">
                                    <mat-error *ngIf="generalDetailsForm.controls.name.errors?.required">{{'Please enter name' | translate}}</mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Surname' | translate}} <span class="red-label">*</span></mat-label>
                                    <input formControlName="surname" matInput type="text" name="surname" (keydown)="space($event)" style="text-transform:capitalize;">
                                    <mat-error *ngIf="generalDetailsForm.controls.surname.errors?.required">{{'Please enter surname' | translate}}</mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Fiscal Code' | translate}} <span class="red-label">*</span></mat-label>
                                      <input formControlName="fiscalCode" matInput type="text" name="fiscalCode" (focusout)="checkCF()">
                                      <mat-error *ngIf="generalDetailsForm.controls.fiscalCode.errors?.required">{{'EnterFiscalCode' | translate}}</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm">
                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                        <mat-label> {{'Gender' | translate}}</mat-label>
                                        <mat-select formControlName="gender">
                                            <mat-option>{{'Select Gender' | translate}}</mat-option>
                                            <mat-option *ngFor="let genders of genderList" value="{{genders.value}}">{{genders.viewValue | translate}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-6 col-xxl-4">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width date-select">
                                      <mat-label>{{'Birthday' | translate}}</mat-label>
                                      <input formControlName="birthday" [max]="maxDate" [matDatepicker] [matDatepicker]="picker_1" matInput type="text" name="birthday">
                                      <mat-datepicker-toggle matSuffix [for]="picker_1" class="full-date-select"></mat-datepicker-toggle>
                                      <mat-datepicker #picker_1 (opened)="streamOpened()"></mat-datepicker>
                                    </mat-form-field>
                                </div>
                              </div>
                              <div class="col-xl-6 col-xxl-4">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Birth Place' | translate}}</mat-label>
                                      <input formControlName="birthPlace" matInput type="text" name="birthPlace" style="text-transform:capitalize;">
                                    </mat-form-field>
                                </div>
                              </div>
                            <div class="col-xl-6 col-xxl-4">
                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                        <mat-label> {{'BirthProv' | translate}}</mat-label>
                                        <mat-select formControlName="birthProv">
                                            <mat-option>{{'Select Prov' | translate}}</mat-option>
                                            <mat-option *ngFor="let provs of provList" value="{{provs}}">{{provs | translate}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'ResidenceAddress' | translate}}</mat-label>
                                  <input formControlName="address" matInput type="text" name="address" style="text-transform:capitalize;">
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'ResidenceCity' | translate}}</mat-label>
                                  <input formControlName="city" matInput type="text" name="city" style="text-transform:capitalize;">
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label> {{'ResidenceProv' | translate}}</mat-label>
                                  <mat-select formControlName="prov">
                                    <mat-option>{{'Select Prov' | translate}}</mat-option>
                                    <mat-option *ngFor="let provs of provList" value="{{provs}}">{{provs | translate}}</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'CAP' | translate}}</mat-label>
                                    <input formControlName="cap" matInput type="text" name="cap">
                                  </mat-form-field>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'DomicileAddress' | translate}}</mat-label>
                                  <input formControlName="addressDomicilio" matInput type="text" name="addressDomicilio" style="text-transform:capitalize;">
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'DomicileCity' | translate}}</mat-label>
                                  <input formControlName="cityDomicilio" matInput type="text" name="cityDomicilio" style="text-transform:capitalize;">
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label> {{'DomicileProv' | translate}}</mat-label>
                                  <mat-select [disabled]="generalDetailsForm.value.residenceAsDomicilio" formControlName="provDomicilio">
                                    <mat-option>{{'Select Prov' | translate}}</mat-option>
                                    <mat-option *ngFor="let provs of provList" value="{{provs}}">{{provs | translate}}</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'DomicileCap' | translate}}</mat-label>
                                    <input formControlName="capDomicilio" matInput type="text" name="capDomicilio">
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm">
                              <div class="form-field">
                                <div class="custom-switch mt-0">
                                    <mat-checkbox formControlName="residenceAsDomicilio" (change)="changeDomicileResidence($event)">{{'CopyResidence' | translate}}</mat-checkbox>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="step-form-bottom">
                            <div>
                              <button  routerLink="/people" class="btn-style red-line-btn" type="button">{{'GENERAL.Cancel' | translate}}</button>
                            </div>
                            <div class="">
                              <button matStepperNext  class="btn-style theme-btn bottom-btn">{{'Next' | translate}} <span class="material-icons left-space">arrow_forward</span></button>
                              <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                            </div>
                          </div>
                        </form>
                      </div>
                    </mat-step>
                    <mat-step [stepControl]="contactInformationForm">
                      <ng-template matStepLabel>
                        <span>
                          <img src="assets/images/Contact.svg"/>
                          <p>{{'Contact' | translate}}</p>
                        </span>
                      </ng-template>
                        <div class="table-content box-style company-info">
                            <div class="table-heading m-30">
                                <h3 style="font-weight: 600">{{'Contact' | translate}}</h3>
                                <p class="m-0"><span class="red-label">*</span> {{'GENERAL.Indicates a required field' | translate}}</p>
                            </div>
                            <form class="form-wrapper" [formGroup]="contactInformationForm">
                              <div class="row">
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'WorkEmail' | translate}} <span class="red-label">*</span></mat-label>
                                      <input formControlName="email" matInput type="email" name="email">
                                      <mat-error *ngIf="contactInformationForm.controls.email.errors?.required">{{'Please enter email' | translate}}</mat-error>
                                      <mat-error *ngIf="contactInformationForm.controls.email.errors?.email">{{'Please enter valid email' | translate}}</mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'WorkPhone' | translate}}</mat-label>
                                      <input formControlName="phone" matInput name="phone">
                                    </mat-form-field>
                                  </div>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'PersonalEmail' | translate}}</mat-label>
                                      <input formControlName="personalEmail" matInput type="email" name="personalEmail">
                                      <mat-error *ngIf="contactInformationForm.controls.email.errors?.email">{{'Please enter valid email' | translate}}</mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'PersonalPhone' | translate}}</mat-label>
                                      <input formControlName="personalPhone" matInput name="personalPhone">
                                    </mat-form-field>
                                  </div>
                                </div>
                              </div>
                              <div class="step-form-bottom">
                                  <div>
                                    <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                                  </div>
                                  <div class="btn-wrapper">
                                    <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button"><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                                    <button  matStepperNext class="btn-style theme-btn bottom-btn">{{'Next' | translate}} <span class="material-icons left-space">arrow_forward</span></button>
                                    <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                                  </div>
                              </div>
                            </form>
                        </div>
                    </mat-step>
                    <mat-step [stepControl]="settingsForm">
                      <ng-template matStepLabel>
                        <span>
                          <img src="assets/images/Settings.svg"/>
                          <p>{{'EmploymentRelationship' | translate}}</p>
                        </span>
                      </ng-template>
                      <div class="table-content box-style">
                        <div class="table-heading m-30">
                          <h3 style="font-weight: 600">{{'EmploymentRelationship' | translate}}</h3>
                          <p class="m-0"><span class="red-label">*</span> {{'GENERAL.Indicates a required field' | translate}}</p>
                        </div>
                        <form class="form-wrapper" [formGroup]="settingsForm">
                          <div class="row">
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableIdentificationCode">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{scope?.alternativeIdentificationCodeName ? scope?.alternativeIdentificationCodeName :'Code Identity' | translate}}<span class="red-label" *ngIf="scope?.requiredIdentificationCode">*</span></mat-label>
                                    <input formControlName="codeIdentity" matInput name="codeIdentity">
                                    <mat-error *ngIf="settingsForm.controls.codeIdentity.errors?.required">
                                      {{scope?.alternativeIdentificationCodeName ? 'Please enter ' + scope?.alternativeIdentificationCodeName :'Please enter code identity' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableDateStart">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width date-select">
                                    <mat-label style="text-transform:capitalize;">{{scope?.alternativeDateStartName ? scope?.alternativeDateStartName :'Hire Date' | translate}}<span class="red-label"  *ngIf="scope?.requiredDateStart">*</span></mat-label>
                                    <input formControlName="hireDate" [matDatepicker]="picker" matInput type="text" name="hireDate">
                                    <mat-datepicker-toggle matSuffix [for]="picker" class="full-date-select"></mat-datepicker-toggle>
                                    <mat-datepicker #picker  (opened)="streamOpened()"></mat-datepicker>
                                    <mat-error *ngIf="settingsForm.controls.hireDate.errors?.required">
                                      {{scope?.alternativeDateStartName ? 'Please enter ' + scope?.alternativeDateStartName :'Please enter hire date' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableDateEnd">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width date-select">
                                    <mat-label style="text-transform:capitalize;">{{scope?.alternativeDateEndName ? scope?.alternativeDateEndName :'Resignation Date' | translate}}<span class="red-label" *ngIf="scope?.requiredDateEnd">*</span></mat-label>
                                    <input formControlName="resignationDate" [matDatepicker]="picker_2" matInput type="text" name="resignationDate">
                                    <mat-datepicker-toggle *ngIf="!settingsForm.value.resignationDate" matSuffix [for]="picker_2" class="full-date-select"></mat-datepicker-toggle>
                                    <mat-datepicker-toggle *ngIf="settingsForm.value.resignationDate" matSuffix class="full-date-select" (click)="clearResignationDate()">
                                      <mat-icon style="color: black" matDatepickerToggleIcon>clear</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker_2  (opened)="streamOpened()"></mat-datepicker>
                                    <mat-error *ngIf="settingsForm.controls.resignationDate.errors?.required">
                                      {{scope?.alternativeDateEndName ? 'Please enter ' + scope?.alternativeDateEndName :'Please enter resignation date' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                          </div>
                          <div class="row" *ngIf="scope?.enableWorkingHours">
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableWorkingHours">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Working Start Time' | translate}}<span class="red-label" *ngIf="scope?.requiredWorkingHours">*</span></mat-label>
                                    <input formControlName="workingStartTime" [ngModel]="getWorkingTime(0)" (change)="onWorkingTimeChange(0, $event.target.value)" readonly (click)="pickerA.open()" matInput name="workingStartTime">
                                    <mat-icon matSuffix (click)="pickerA.open()">schedule</mat-icon>
                                    <mat-error *ngIf="settingsForm.controls.workingStartTime.errors?.required">{{'Please enter working start time' | translate}}</mat-error>
                                    <ngx-material-timepicker #pickerA [format]="24" (timeSet)="setWorkingTime(0, $event)">
                                    </ngx-material-timepicker>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableWorkingHours">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Working End Time' | translate}}<span class="red-label" *ngIf="scope?.requiredWorkingHours">*</span></mat-label>
                                    <input formControlName="workingEndTime" [ngModel]="getWorkingTime(3)" (change)="onWorkingTimeChange(3, $event.target.value)" readonly (click)="pickerD.open()" matInput name="workingEndTime">
                                    <mat-icon matSuffix (click)="pickerD.open()">schedule</mat-icon>
                                    <mat-error *ngIf="settingsForm.controls.workingEndTime.errors?.required">{{'Please enter working end time' | translate}}</mat-error>
                                  </mat-form-field>
                                  <ngx-material-timepicker #pickerD [format]="24" (timeSet)="setWorkingTime(3, $event)">
                                  </ngx-material-timepicker>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableWorkingHours">
                              <div class="form-field error-message-custom">
                                  <div class="custom-switch mt-0">
                                      <mat-checkbox formControlName="enablePlan">{{'Enable Plan' | translate}}</mat-checkbox>
                                  </div>
                                </div>
                            </div>
                          </div>
                          <div class="row" *ngIf="scope?.enableWorkingHours">
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableWorkingHours">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Lunch Start Time' | translate}}<span class="red-label" *ngIf="scope?.requiredWorkingHours">*</span></mat-label>
                                    <input formControlName="lunchStartTime" [ngModel]="getWorkingTime(1)" (change)="onWorkingTimeChange(1, $event.target.value)" readonly (click)="pickerB.open()" matInput name="lunchStartTime">
                                    <mat-icon matSuffix (click)="pickerB.open()">schedule</mat-icon>
                                    <mat-error *ngIf="settingsForm.controls.lunchStartTime.errors?.required">{{'Please enter lunch start time' | translate}}</mat-error>
                                  </mat-form-field>
                                  <ngx-material-timepicker #pickerB [format]="24" (timeSet)="setWorkingTime(1, $event)">
                                  </ngx-material-timepicker>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableWorkingHours">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Lunch End Time' | translate}}<span class="red-label" *ngIf="scope?.requiredWorkingHours">*</span></mat-label>
                                    <input formControlName="lunchEndTime" [ngModel]="getWorkingTime(2)" (change)="onWorkingTimeChange(2, $event.target.value)" readonly (click)="pickerC.open()" matInput name="lunchEndTime">
                                    <mat-icon matSuffix (click)="pickerC.open()">schedule</mat-icon>
                                    <mat-error *ngIf="settingsForm.controls.lunchEndTime.errors?.required">{{'Please enter lunch end time' | translate}}</mat-error>
                                  </mat-form-field>
                                  <ngx-material-timepicker #pickerC [format]="24" (timeSet)="setWorkingTime(2, $event)">
                                  </ngx-material-timepicker>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field error-message-custom">
                                  <div class="custom-switch mt-0">
                                      <mat-checkbox formControlName="openLunch">{{'Open Lunch' | translate}}</mat-checkbox>
                                  </div>
                                </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm" *ngIf="scope?.enableTypology">
                              <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label style="text-transform:capitalize;">{{scope?.topologyAlternativeName ? scope?.topologyAlternativeName :'Typology' | translate}}<span style="color:#EA5455" *ngIf="scope?.requiredTopology">*</span></mat-label>
                                      <mat-select formControlName="typology">
                                          <mat-option>{{'Select Typology' | translate}}</mat-option>
                                          <mat-option *ngFor="let typologys of typologyList" value="{{typologys.value}}">{{typologys.viewValue | translate}}</mat-option>
                                      </mat-select>
                                      <mat-error *ngIf="settingsForm.controls.typology.errors?.required">
                                        {{scope?.topologyAlternativeName ? 'Please enter ' + scope?.topologyAlternativeName :'Please select typology' | translate}}
                                      </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm" *ngIf="scope?.enableArea">
                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                        <mat-label style="text-transform:capitalize;">{{scope?.areaAlternativeName ? scope?.areaAlternativeName :'Area' | translate}}<span style="color:#EA5455" *ngIf="scope?.requiredArea">*</span></mat-label>
                                        <mat-select formControlName="area">
                                            <mat-option>{{'Select Area' | translate}}</mat-option>
                                            <mat-option *ngFor="let areas of sortedAreasAvailable" value="{{areas.name}}" style="text-transform:capitalize;">{{areas.name | translate}}</mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="settingsForm.controls.area.errors?.required">
                                          {{scope?.areaAlternativeName ? 'Please enter ' + scope?.areaAlternativeName :'Please select area' | translate}}
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm" *ngIf="scope?.enableRole">
                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                        <mat-label style="text-transform:capitalize;">{{scope?.alternativeRoleName ? scope?.alternativeRoleName :'Role' | translate}}<span style="color:#EA5455" *ngIf="scope?.requiredRole">*</span></mat-label>
                                        <mat-select formControlName="role">
                                            <mat-option>{{'Select Role' | translate}}</mat-option>
                                            <mat-option *ngFor="let roles of sortedRoles" value="{{roles}}" style="text-transform:capitalize;">{{roles | translate}}</mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="settingsForm.controls.role.errors?.required">
                                          {{scope?.alternativeRoleName ? 'Please enter ' + scope?.alternativeRoleName :'Please select role' | translate}}
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-sm" *ngIf="scope?.enableJobTitle">
                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                        <mat-label style="text-transform:capitalize;">{{scope?.alternativeJobTitleName ? scope?.alternativeJobTitleName :'Job Title' | translate}}<span style="color:#EA5455" *ngIf="scope?.requiredJobTitle">*</span></mat-label>
                                        <mat-select formControlName="jobTitle">
                                            <mat-option>{{'Select Job Title' | translate}}</mat-option>
                                            <mat-option *ngFor="let jt of sortedJobTitles" value="{{jt}}" style="text-transform:capitalize;">{{jt | translate}}</mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="settingsForm.controls.jobTitle.errors?.required">
                                          {{scope?.areaAlternativeName ? 'Please enter ' + scope?.alternativeJobTitleName :'Please select job title' | translate}}
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                              </div>
                            </div>
                          <div class="row">
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label> {{'Site' | translate}} <span style="color:#EA5455">*</span></mat-label>
                                  <mat-select formControlName="site">
                                      <mat-option>{{'Select Site' | translate}}</mat-option>
                                      <mat-option *ngFor="let sites of siteList" value="{{sites.id}}" style="text-transform:capitalize;">{{sites.name | translate}}</mat-option>
                                  </mat-select>
                                  <mat-error *ngIf="settingsForm.controls.site.errors?.required">
                                    {{'Please select site' | translate}}
                                  </mat-error>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableManager">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{scope?.managerAlternativeName ? scope?.managerAlternativeName :'Manager' | translate}}<span class="red-label" *ngIf="scope?.requiredManager">*</span></mat-label>
                                    <mat-select formControlName="manager">
                                      <mat-option *ngFor="let p of people" value="{{p.id}}" style="text-transform:capitalize;">{{p.name}} {{p.surname}}</mat-option>
                                  </mat-select>
                                    <mat-error *ngIf="settingsForm.controls.manager.errors?.required">
                                      {{scope?.managerAlternativeName ? 'Please enter ' + scope?.managerAlternativeName :'Please select manager' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enablePartTimePercentage">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{scope?.alternativePartTimePercentageName ? scope?.alternativePartTimePercentageName :'Part Time' | translate}}<span class="red-label" *ngIf="scope?.requiredPartTimePercentage">*</span></mat-label>
                                    <input formControlName="partTime" matInput name="partTime">
                                    <mat-error *ngIf="settingsForm.controls.partTime.errors?.required">
                                      {{scope?.alternativePartTimePercentageName ? 'Please enter ' + scope?.alternativePartTimePercentageName :'Please enter part time' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableBadgeId">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{scope?.alternativeBadgeName ? scope?.alternativeBadgeName :'Badge No' | translate}}<span class="red-label" *ngIf="scope?.requiredBadgeId">*</span></mat-label>
                                    <input formControlName="badgeNo" matInput type="text" name="badgeNo">
                                    <mat-error *ngIf="settingsForm.controls.badgeNo.errors?.required">
                                      {{scope?.alternativeBadgeName ? 'Please enter ' + scope?.alternativeBadgeName :'Please enter badge no' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableRestaurantCardId">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{scope?.alternativeRestaurantCardName ? scope?.alternativeRestaurantCardName :'Restaurant Card No' | translate}}<span class="red-label" *ngIf="scope?.requiredRestaurantCardId">*</span></mat-label>
                                    <input formControlName="restaurantCardNo" matInput name="restaurantCardNo">
                                    <mat-error *ngIf="settingsForm.controls.restaurantCardNo.errors?.required">
                                      {{scope?.alternativeRestaurantCardName ? 'Please enter ' + scope?.alternativeRestaurantCardName :'Please enter restaurant card no' | translate}}
                                    </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field error-message-custom">
                                  <div class="custom-switch mt-0">
                                      <mat-checkbox formControlName="greenPass">{{'Greenpass Verification' | translate}}</mat-checkbox>
                                  </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field error-message-custom">
                                  <div class="custom-switch mt-0">
                                      <mat-checkbox formControlName="keys">{{'Enable Keys' | translate}}</mat-checkbox>
                                  </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label style="text-transform:capitalize;">{{'NumeroMatricola' | translate}}</mat-label>
                                  <input formControlName="numeroMatricola" matInput name="numeroMatricola">
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label style="text-transform:capitalize;">Tutor</mat-label>
                                  <input formControlName="tutor" matInput name="tutor">
                                </mat-form-field>
                              </div>
                            </div>
                          </div>
                          <div class="step-form-bottom">
                            <div>
                              <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                            </div>
                            <div class="btn-wrapper">
                              <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button" ><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                              <button  matStepperNext class="btn-style theme-btn bottom-btn" >{{'Next' | translate}}<span class="material-icons left-space">arrow_forward</span></button>
                              <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                            </div>
                          </div>
                        </form>
                      </div>
                    </mat-step>
                    <mat-step [stepControl]="accessControlForm">
                      <ng-template matStepLabel>
                        <span>
                          <img src="assets/images/Accesses.svg"/>
                          <p>{{'Accesses' | translate}}</p>
                        </span>
                      </ng-template>
                      <div class="table-content box-style">
                        <div class="table-heading m-30">
                          <h3 style="font-weight: 600">{{'Accesses' | translate}}</h3>
                          <div style="display:flex; justify-content:flex-end;">
                            <button (click)="onBadgeHistory()" class="btn-style theme-btn">{{'ACCESS_CONTROL.BadgeHistory' | translate}} <span class="material-icons" style="padding-left:10px">manage_search</span></button>
                            <button (click)="onRegenerateBadge()" class="btn-style theme-btn">{{'ACCESS_CONTROL.RegenerateBadge' | translate}} <span class="material-icons" style="padding-left:10px">history</span></button>
                          </div>
                        </div>
                        <form class="form-wrapper" [formGroup]="accessControlForm">
                          <div class="row">       
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'ACCESS_CONTROL.AccessControlSystem' | translate}}</mat-label>
                                  <mat-select formControlName="accessControlSystem" (selectionChange)="onSystemChange($event)">
                                    <mat-option [value]="''">{{'NoAccessControl' | translate}}</mat-option>
                                    <mat-option *ngFor="let system of accessControlSystemsList" value="{{system.id}}">{{system.name}}</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'ACCESS_CONTROL.AccessLevel' | translate}}</mat-label>
                                  <mat-select [disabled]="accessControlForm.value.accessControlSystem==''" (selectionChange)="onLevelChange($event)" formControlName="accessControlLevel">
                                    <mat-option [value]="accessControlLevels.NONE">
                                      {{'INSIGHTS_PEOPLE_PAGE.ACCESS NONE' | translate}}
                                    </mat-option>
                                    <mat-option [value]="accessControlLevels.PASSEPARTOUT">
                                        {{'INSIGHTS_PEOPLE_PAGE.ACCESS PASSEPARTOUT' | translate}}
                                    </mat-option>
                                    <mat-option [value]="accessControlLevels.GROUP">
                                        {{'INSIGHTS_PEOPLE_PAGE.ACCESS GROUP' | translate}}
                                    </mat-option>
                                    <mat-option [value]="accessControlLevels.SINGLE_PASSAGES">
                                        {{'INSIGHTS_PEOPLE_PAGE.ACCESS PASSAGES' | translate}}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div>
                          </div>
                          <ng-container *ngIf="accessControlForm.value.accessControlLevel==accessControlLevels.SINGLE_PASSAGES">
                            <div class="row">
                              <div class="table-heading m-30" style="margin-bottom: 10px !important">
                                <p class="m-0" style="color: black; font-size: 20px">{{'INSIGHTS_PEOPLE_PAGE.DESCRIPTION ACCESS ACCESSES' | translate}}</p>
                              </div>
                            </div>
                            <div class="row" *ngFor="let site of accessControlGatesList">
                              <div class="table-heading m-30" style="margin-bottom:10px !important">
                                <p class="m-0" style="font-size:18px !important">{{site.siteName}}</p>
                              </div>
                              <div class="col-xl-3 col-xxl-3" *ngFor="let gate of site.siteGates">
                                <div class="form-field">
                                  <div class="custom-switch mt-0">
                                    <mat-checkbox (change)="gateCheckEvent(gate.id,$event)" [checked]="checkGate(gate.id)">{{gate.name}}</mat-checkbox>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="accessControlForm.value.accessControlLevel==accessControlLevels.GROUP">
                            <div class="row" >
                              <div class="table-heading m-30" style="margin-bottom: 10px !important">
                                <p class="m-0" style="color: black; font-size: 20px">{{'SelectGroups' | translate}}:</p>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-xl-3 col-xxl-3" *ngFor="let group of accessControlGroupsList">
                                <div class="form-field">
                                  <div class="custom-switch mt-0">
                                    <mat-checkbox (change)="groupCheckEvent(group.id,$event)" [checked]="checkGroup(group.id)">{{group.name}}</mat-checkbox>
                                  </div>
                                </div>
                              </div>
                            </div> 
                            <div class="row" style="padding-top: 20px">
                              <div class="table-heading m-30" style="margin-bottom: 10px !important">
                                <p class="m-0" style="color: black; font-size: 20px">{{'IncludedGates' | translate}}:</p>
                              </div>
                            </div>
                            <div class="row" *ngFor="let site of accessControlGatesList">
                              <div class="table-heading m-30" style="margin-bottom:10px !important">
                                <p class="m-0" style="font-size:18px !important">{{site.siteName}}</p>
                              </div>
                              <div class="col-xl-3 col-xxl-3" *ngFor="let gate of site.siteGates">
                                <div class="form-field">
                                  <div class="custom-switch mt-0">
                                    <mat-checkbox disabled [checked]="checkGateGroup(gate.id)">{{gate.name}}</mat-checkbox>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="accessControlForm.value.accessControlLevel==accessControlLevels.PASSEPARTOUT">
                            <div class="row">
                              <div class="table-heading m-30" style="margin-bottom: 10px !important">
                                <p class="m-0" style="color: black; font-size: 20px">{{'INSIGHTS_PEOPLE_PAGE.DESCRIPTION ACCESS PASSEPARTOUT' | translate}}</p>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="accessControlForm.value.accessControlLevel==accessControlLevels.NONE">
                            <div class="row">
                              <div class="table-heading m-30" style="margin-bottom: 10px !important">
                                <p class="m-0" style="color: black; font-size: 20px">{{'INSIGHTS_PEOPLE_PAGE.DESCRIPTION ACCESS NONE' | translate}}</p>
                              </div>
                            </div>
                          </ng-container>
                          <div class="step-form-bottom">
                            <div>
                              <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                            </div>
                            <div class="btn-wrapper">
                              <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button"><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                              <button  matStepperNext class="btn-style theme-btn bottom-btn">{{'Next' | translate}} <span class="material-icons left-space">arrow_forward</span></button>
                              <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                            </div>
                        </div>
                        </form>
                      </div>
                    </mat-step>
                    <mat-step>
                      <ng-template matStepLabel>
                        <span>
                          <img src="assets/images/Documents.svg"/>
                          <p>{{'Documents' | translate}}</p>
                        </span>
                      </ng-template>
                      <div class="table-content box-style">
                        <div class="table-heading m-30">
                          <h3 style="font-weight: 600">{{'Documents' | translate}}</h3>
                          <button (click)="onUploadDoc()" class="btn-style theme-btn">{{'DOCUMENTS.UploadUserDoc' | translate}} <span class="material-icons" style="padding-left:10px">note_add</span></button>
                        </div>
                        <form class="form-wrapper">
                          
                          <div class="common-tabbing-popup">
                            <mat-tab-group mat-stretch-tabs (selectedTabChange)="onDocTabChange($event)" [selectedIndex]="docTabIndex">
                              <mat-tab *ngFor="let doc of documentList" label="{{doc.name}}"></mat-tab>
                            </mat-tab-group>
                          </div>
                          <div class="table-wrapper resource-color-table">
                            <table [dataSource]="userDocumentListTransformed | paginate: {id: 'doc-pagination', itemsPerPage: this.itemsPerPageD, currentPage: this.pageD, totalItems: this.totalItemsD }" mat-table style="width: 100%" >
                              <ng-container matColumnDef="wheelAction">
                                <th  mat-header-cell *matHeaderCellDef style="width: 100px;">
                                  {{'ACCESS_CONTROL.Actions'| translate}} 
                                </th>
                                <td class="p-0" mat-cell *matCellDef="let element" style="width: 100px;">
                                  <span *ngIf="element.isExpired" title="{{'DOCUMENTS.Expired' | translate}}" [style.borderLeftColor]="'#FF0000'" class="border-types" style="white-space: nowrap;">
                                    <div class="hover-effect-menu four-icons">
                                      <div class="short-arrow">
                                        <span class="material-icons" >more_horiz</span>
                                      </div>
                                      <div class="hover-round-effect">
                                        <button mat-menu-item (click)="editUserDocument(element)" matTooltip="{{'DOCUMENTS.EditDocument' | translate}}">
                                          <span class="material-icons">edit</span>
                                        </button>
                                        <button mat-menu-item (click)="viewUserDocument(element)" matTooltip="{{'DOCUMENTS.ViewDocument' | translate}}">
                                          <span class="material-icons">visibility</span>
                                        </button>
                                        <button mat-menu-item (click)="downloadUserDocument(element)" matTooltip="{{'DOCUMENTS.DownloadDocument' | translate}}">
                                          <span class="material-icons">download</span>
                                        </button>
                                        <button mat-menu-item (click)="deleteUserDocument(element)" matTooltip="{{'DOCUMENTS.DeleteDocument' | translate}}">
                                          <span class="material-icons">delete</span>
                                        </button>
                                      </div>
                                    </div>
                                  </span>
                                  <span *ngIf="!element.isExpired" title="{{'DOCUMENTS.Valid' | translate}}" [style.borderLeftColor]="'#00A042'" class="border-types" style="white-space: nowrap;">
                                    <div class="hover-effect-menu four-icons">
                                      <div class="short-arrow">
                                        <span class="material-icons" >more_horiz</span>
                                      </div>
                                      <div class="hover-round-effect">
                                        <button mat-menu-item (click)="editUserDocument(element)" matTooltip="{{'DOCUMENTS.EditDocument' | translate}}">
                                          <span class="material-icons">edit</span>
                                        </button>
                                        <button mat-menu-item (click)="viewUserDocument(element)" matTooltip="{{'DOCUMENTS.ViewDocument' | translate}}">
                                          <span class="material-icons">visibility</span>
                                        </button>
                                        <button mat-menu-item (click)="downloadUserDocument(element)" matTooltip="{{'DOCUMENTS.DownloadDocument' | translate}}">
                                          <span class="material-icons">download</span>
                                        </button>
                                        <button mat-menu-item (click)="deleteUserDocument(element)" matTooltip="{{'DOCUMENTS.DeleteDocument' | translate}}">
                                          <span class="material-icons">delete</span>
                                        </button>
                                      </div>
                                    </div>
                                  </span>
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="docType">
                                <th  (click)="changeSortingD('documentId',sortKey)" *matHeaderCellDef class="short-arrow"  mat-header-cell style="width: 180px;min-width: 180px">
                                  {{'DOCUMENTS.Type'| translate}} <span
                                  [ngClass]="{'down': sortByD === 'documentId' && sortKeyD === '-1' , 'up': sortByD === 'documentId' && sortKeyD === '1'}" >
                                  <img *ngIf="sortByD == 'documentId'" alt="" src="assets/images/up-arrow.svg">
                                  <img *ngIf="sortByD != 'documentId'" alt="" src="assets/images/up-arrow-grey.svg"></span>
                                </th>
                                <td mat-cell *matCellDef="let element" style="white-space: break-spaces;width: 180px;min-width: 180px">
                                  {{element.documentTypeName ? element.documentTypeName : '-'}}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="fileName">
                                <th  (click)="changeSortingD('fileName',sortKey)" *matHeaderCellDef class="short-arrow"  mat-header-cell style="width: 180px;min-width: 180px">
                                  {{'DOCUMENTS.FileName'| translate}} <span
                                  [ngClass]="{'down': sortByD === 'fileName' && sortKeyD === '-1' , 'up': sortByD === 'fileName' && sortKeyD === '1'}" >
                                  <img *ngIf="sortByD == 'fileName'" alt="" src="assets/images/up-arrow.svg">
                                  <img *ngIf="sortByD != 'fileName'" alt="" src="assets/images/up-arrow-grey.svg"></span>
                                </th>
                                <td mat-cell *matCellDef="let element" style="white-space: break-spaces;width: 180px;min-width: 180px">
                                  {{element.fileName ? element.fileName : '-'}}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="timestamp">
                                <th  (click)="changeSortingD('timestamp',sortKey)" *matHeaderCellDef class="short-arrow"  mat-header-cell style="width: 180px;min-width: 180px">
                                  {{'DOCUMENTS.StartDate'| translate}} <span
                                  [ngClass]="{'down': sortByD === 'timestamp' && sortKeyD === '-1' , 'up': sortByD === 'timestamp' && sortKeyD === '1'}" >
                                  <img *ngIf="sortByD == 'timestamp'" alt="" src="assets/images/up-arrow.svg">
                                  <img *ngIf="sortByD != 'timestamp'" alt="" src="assets/images/up-arrow-grey.svg"></span>
                                </th>
                                <td mat-cell *matCellDef="let element" style="white-space: break-spaces;width: 180px;min-width: 180px">
                                  {{element.timestamp ? (element.timestamp | date:'dd/MM/yyyy'):'-'}}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="expirationDate">
                                <th  (click)="changeSortingD('expirationDate',sortKey)" *matHeaderCellDef class="short-arrow"  mat-header-cell style="width: 180px;min-width: 180px">
                                  {{'DOCUMENTS.ExpirationDate'| translate}} <span
                                  [ngClass]="{'down': sortByD === 'expirationDate' && sortKeyD === '-1' , 'up': sortByD === 'expirationDate' && sortKeyD === '1'}" >
                                  <img *ngIf="sortByD == 'expirationDate'" alt="" src="assets/images/up-arrow.svg">
                                  <img *ngIf="sortByD != 'expirationDate'" alt="" src="assets/images/up-arrow-grey.svg"></span>
                                </th>
                                <td mat-cell *matCellDef="let element" style="white-space: break-spaces;width: 180px;min-width: 180px">
                                  {{element.expirationDate ? (element.expirationDate | date:'dd/MM/yyyy'):'-'}}
                                </td>
                              </ng-container>
                              <tr mat-header-row *matHeaderRowDef="userDocumentsDisplayedColumns"></tr>
                              <tr mat-row *matRowDef="let element; columns: userDocumentsDisplayedColumns"></tr>
                            </table>
                          </div>
                          <div *ngIf="!noRecordFoundD" class="no-record-found">{{'TABLE.No_record_found' | translate}}</div>
                          <div *ngIf="noRecordFoundD"class="paginate-footer">
                            <div class="page-item">
                              <h3>{{'TABLE.Items_per_page' | translate}}</h3>
                              <mat-form-field appearance="fill">
                                <mat-select [(ngModel)]="itemsPerPageD" (selectionChange)="changeItemsPerPageD()">
                                  <mat-option value='5'>5</mat-option>
                                  <mat-option value='10'>10</mat-option>
                                  <mat-option value='15'>15</mat-option>
                                  <mat-option value='20'>20</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            <div class="table-paginator">
                              <pagination-controls id="doc-pagination" responsive="true" (pageChange)="pageChangedD($event)"></pagination-controls>
                            </div>
                          </div>
                          
                          <div class="step-form-bottom">
                            <div>
                              <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                            </div>
                            <div class="btn-wrapper">
                              <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button"><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                              <button  matStepperNext class="btn-style theme-btn bottom-btn">{{'Next' | translate}} <span class="material-icons left-space">arrow_forward</span></button>
                              <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                            </div>
                          </div>
                        </form>
                      </div>
                    </mat-step>
                    <mat-step *ngIf="scope?.enableDisputes" [stepControl]="disputeFieldsForm">
                        <ng-template matStepLabel>
                          <span>
                            <img src="assets/images/Dispute.svg"/>
                            <p>{{'Dispute' | translate}}</p>
                          </span>
                        </ng-template>
                        <div class="table-content box-style">
                          <div class="table-heading m-30">
                            <h3 style="font-weight: 600">{{'Dispute' | translate}}</h3>
                          </div>
                          <form class="form-wrapper" [formGroup]="disputeFieldsForm" >
                            <div class="row row-list" formArrayName="dispute" *ngFor="let item of disputeFieldsForm.get('dispute').controls; let i = index;">
                              <ng-container [formGroupName]="i">
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width date-select">
                                      <mat-label>{{'Date' | translate}}</mat-label>
                                      <input formControlName="date" [matDatepicker]="picker_3" matInput name="disputeDate" type="text">
                                      <mat-datepicker-toggle matSuffix  [for]="picker_3" class="full-date-select"></mat-datepicker-toggle>
                                      <mat-datepicker #picker_3 (opened)="streamOpened()"></mat-datepicker>
                                      <mat-error *ngIf="formSubmitted && disputeFieldsFormNew.controls.dispute.errors?.required">{{'Please select dispute date' | translate}}</mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Dispute' | translate}}</mat-label>
                                      <input formControlName="dispute" matInput name="dispute" type="text" style="text-transform:capitalize;">
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Note' | translate}}</mat-label>
                                      <input formControlName="note" matInput name="note" type="text">
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="col-xl-6 col-xxl-4">
                                  <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width date-select">
                                      <mat-label style="text-transform:capitalize;">{{'Notification Date' | translate}}</mat-label>
                                      <input formControlName="notificationDate" [matDatepicker]="picker_4" matInput name="notificationDate" type="text">
                                      <mat-datepicker-toggle matSuffix  [for]="picker_4" class="full-date-select"></mat-datepicker-toggle>
                                      <mat-datepicker #picker_4  (opened)="streamOpened()"></mat-datepicker>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="col-xl-6 col-xxl-4">
                                <div class="row">
                                  <div class="col-sm-12">
                                    <button *ngIf="getLastIndex() != i" class="custom-btn btn-style red-btn"  type="button"
                                    (click)="removeDisputeItem(i)">{{'Delete Dispute' | translate}}</button>
                                     <button *ngIf="getLastIndex() == i" class="custom-btn btn-style green-btn normal-btn" type="submit" (click)="addDispute()"><span class="material-icons">add</span>{{'Add More Dispute' | translate}}</button>
                                  </div>
                                </div>
                              </div>
                            </ng-container>

                            </div>
                          </form>
                          <div class="step-form-bottom">
                            <div>
                              <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                            </div>
                            <div class="btn-wrapper">
                              <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button"><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                              <button  matStepperNext (click)="saveDisputeFieldsdata(peopleStepper)" class="btn-style theme-btn bottom-btn" >{{'Next' | translate}} <span class="material-icons left-space">arrow_forward</span></button>
                              <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                            </div>
                          </div>
                        </div>
                    </mat-step>
                    <mat-step *ngIf="scope?.enableSalary || scope?.enableMbo || scope?.enableBonus || scope?.enableContractLevel" [stepControl]="economicsFieldsForm">
                        <ng-template matStepLabel>
                          <span>
                            <img src="assets/images/Economics.svg"/>
                            <p>{{'Economics' | translate}}</p>
                          </span>
                        </ng-template>
                        <div class="table-content box-style">
                          <div class="table-heading m-30">
                            <h3 style="font-weight: 600">{{'Economics' | translate}}</h3>
                          </div>
                          <form class="form-wrapper" [formGroup]="economicsFieldsForm">
                            <div class="row">
                              <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableSalary">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Salary' | translate}}</mat-label>
                                    <input formControlName="salary" matInput name="salary">
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableMbo">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'MBO' | translate}}</mat-label>
                                    <input formControlName="mbo" matInput name="mbo">
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableBonus">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label>{{'Bonus' | translate}}</mat-label>
                                    <input formControlName="bonus" matInput name="bonus">
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="col-xl-6 col-xxl-4" *ngIf="scope?.enableContractLevel">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{'Contract Level' | translate}}</mat-label>
                                    <input formControlName="contractLevel" matInput name="contractLevel" type="text">
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="col-xl-6 col-xxl-4">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">CCNL</mat-label>
                                    <input formControlName="ccnl" matInput name="ccnl" type="text">
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="col-xl-6 col-xxl-4">
                                <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                    <mat-label style="text-transform:capitalize;">{{'EntePatrocinante' | translate}}</mat-label>
                                    <input formControlName="patrocinante" matInput name="patrocinante" type="text">
                                  </mat-form-field>
                                </div>
                              </div>
                            </div>
                            <div class="step-form-bottom">
                              <div>
                                <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                              </div>
                              <div class="btn-wrapper">
                                <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button"><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                                <button  matStepperNext class="btn-style theme-btn bottom-btn">{{'Next' | translate}} <span class="material-icons left-space">arrow_forward</span></button>
                                <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                              </div>
                          </div>
                          </form>
                        </div>
                    </mat-step>
                    <!--mat-step [stepControl]="addAccountForm">
                      <ng-template matStepLabel>
                        <span>
                          <img src="assets/images/Add Account.svg" />
                          <p>Account</p>
                        </span>
                      </ng-template>
                      <div class="table-content box-style">
                        <div class="table-heading m-30">
                          <h3 style="font-weight: 600">{{'Add Account' | translate}}</h3>
                          <p class="m-0"><span class="red-label">*</span> {{'GENERAL.Indicates a required field' | translate}}</p>
                        </div>
                        <form class="form-wrapper" [formGroup]="addAccountForm">
                          <div class="row">
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'User ID' | translate}}</mat-label>
                                  <input formControlName="userId" matInput name="userId" (keydown)="space($event)">
                                  <mat-error *ngIf="addAccountForm.controls.userId.errors?.required">{{'Please enter user id' | translate}}</mat-error>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label style="text-transform:capitalize;"> {{'Authentication Method' | translate}}<span style="color:#EA5455">*</span></mat-label>
                                  <mat-select formControlName="authProvider">
                                    <mat-option>{{'Select Authentication Method' | translate}}</mat-option>
                                    <mat-option *ngFor="let authenticationMethods of authenticationMethodList" value="{{authenticationMethods.value}}">
                                      {{authenticationMethods.viewValue | translate}}</mat-option>
                                  </mat-select>
                                  <mat-error *ngIf="addAccountForm.controls.authProvider.errors?.required">
                                    {{'Please select authentication method' | translate}}
                                  </mat-error>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'Password' | translate}}</mat-label>
                                  <input matInput formControlName="newPassword" minlength="6"  name="newPassword"  [type]="hide ? 'password' : 'text'" onkeypress="return event.charCode != 32">
                                  <mat-error *ngIf="addAccountForm.controls.newPassword.errors?.required" >{{'Please enter password' | translate}}</mat-error>
                                  <button mat-icon-button matSuffix type="button" (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                                  </button>
                                 </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                <mat-form-field appearance="outline" class="element-full-width">
                                  <mat-label>{{'Confirm Password' | translate}}</mat-label>
                                  <input matInput formControlName="confirmPassword" minlength="6"  name="password"  [type]="hide1 ? 'password' : 'text'" onkeypress="return event.charCode != 32">
                                  <mat-error *ngIf="addAccountForm.controls.confirmPassword.errors?.required" >{{'Please enter confirm password' | translate}}</mat-error>
                                  <mat-error *ngIf="addAccountForm.controls.confirmPassword.errors?.confirmedValidator">{{'RESET_PASSWORD.ConfirmPasswordMatch' | translate}}</mat-error>
                                  <button mat-icon-button matSuffix (click)="hide1 = !hide1" type="button" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                                    <mat-icon>{{hide1 ? 'visibility_off' : 'visibility'}}</mat-icon>
                                  </button>
                                 </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Password Validity' | translate}}<span style="color:#EA5455">*</span></mat-label>
                                      <mat-select formControlName="passwordValid">
                                          <mat-option>{{'Select Password Validity' | translate}}</mat-option>
                                          <mat-option *ngFor="let validity of passwordValidity" value="{{validity.value}}">{{validity.viewValue | translate}}</mat-option>
                                      </mat-select>
                                      <mat-error *ngIf="addAccountForm.controls.passwordValid.errors?.required" >
                                          {{'Please Select password validity' | translate}}
                                      </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="element-full-width">
                                        <mat-label>{{'Password Min' | translate}}<span style="color:#EA5455">*</span></mat-label>
                                        <mat-select formControlName="passwordMin">
                                            <mat-option>{{'Select Password Min' | translate}}</mat-option>
                                            <mat-option *ngFor="let minPassword of passwordMinList" value="{{minPassword.value}}">{{minPassword.viewValue | translate}}</mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="addAccountForm.controls.passwordMin.errors?.required" >
                                            {{'Please Select password min' | translate}}
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Password Max' | translate}}<span style="color:#EA5455">*</span></mat-label>
                                      <mat-select formControlName="passwordMax">
                                          <mat-option>{{'Select Password Max' | translate}}</mat-option>
                                          <mat-option *ngFor="let maxPassword of passwordMaxList" value="{{maxPassword.value}}">{{maxPassword.viewValue | translate}}</mat-option>
                                      </mat-select>
                                      <mat-error *ngIf="addAccountForm.controls.passwordMax.errors?.required" >
                                          {{'Please Select password max' | translate}}
                                      </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                            <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Password Pattern' | translate}}<span style="color:#EA5455">*</span></mat-label>
                                      <mat-select formControlName="passwordPattern">
                                          <mat-option>{{'Select Password Pattern' | translate}}</mat-option>
                                          <mat-option *ngFor="let passwordPatter of passwordPatternList" value="{{passwordPatter.value}}">{{passwordPatter.viewValue | translate}}</mat-option>
                                      </mat-select>
                                      <mat-error *ngIf="addAccountForm.controls.passwordPattern.errors?.required" >
                                          {{'Please select password pattern' | translate}}
                                      </mat-error>
                                  </mat-form-field>
                              </div>
                          </div>
                          <div class="col-xl-6 col-xxl-4">
                              <div class="form-field">
                                  <mat-form-field appearance="outline" class="element-full-width">
                                      <mat-label>{{'Allowed Previous Password' | translate}}<span style="color:#EA5455">*</span></mat-label>
                                      <mat-select formControlName="allowedPreviousPassword">
                                          <mat-option>{{'Select Allowed Previous Password' | translate}}</mat-option>
                                          <mat-option *ngFor="let allowpass of previousPassword" value="{{allowpass.value}}">{{allowpass.viewValue | translate}}</mat-option>
                                      </mat-select>
                                      <mat-error *ngIf="addAccountForm.controls.allowedPreviousPassword.errors?.required" >
                                          {{'Please select allowed previous password' | translate}}
                                      </mat-error>
                                  </mat-form-field>
                              </div>
                            </div>
                          </div>
                            <div class="step-form-bottom">
                              <div>
                                <button  routerLink="/people" class="btn-style red-line-btn"  type="button">{{'GENERAL.Cancel' | translate}}</button>
                              </div>
                              <div class="btn-wrapper">
                                <span routerLink="/people" class="stepper-link">{{'Add Account Later' | translate}}</span>
                                <button  matStepperPrevious class="btn-style privious-btn bottom-btn"  type="button"><span class="material-icons">arrow_backward</span> {{'Back' | translate}}</button>
                                <button  class="btn-style green-btn bottom-btn" (click)="saveAndExit()">{{'Save&Exit' | translate}} <span class="material-icons left-space">done</span></button>
                              </div>
                          </div>
                          </form>
                        </div>
                    </mat-step-->
                </mat-horizontal-stepper>
            </div>
        </div>
    </div>
</section>
